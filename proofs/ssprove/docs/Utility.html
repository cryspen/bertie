<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link href="coqdoc.css" rel="stylesheet" type="text/css" />
<title>Utility</title>
</head>

<body>

<div id="page">

<div id="header">
</div>

<div id="main">

<h1 class="libtitle">Library Utility</h1>

<div class="code">
</div>
<details><summary>imports </summary><div class="code">
<span class="id" title="keyword">From</span> <span class="id" title="var">mathcomp</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="var">all_ssreflect</span> <span class="id" title="var">fingroup.fingroup</span> <span class="id" title="var">ssreflect</span>.<br/>
<span class="id" title="keyword">Set</span> <span class="id" title="var">Warnings</span> "-notation-overridden,-ambiguous-paths".<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">Crypt</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="var">choice_type</span> <span class="id" title="var">Package</span> <span class="id" title="var">Prelude</span>.<br/>
<span class="id" title="keyword">Import</span> <span class="id" title="var">PackageNotation</span>.<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">extructures</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="var">ord</span> <span class="id" title="var">fset</span>.<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">mathcomp</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="var">word_ssrZ</span> <span class="id" title="var">word</span>.<br/>

<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">Coq</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="var">ZArith</span>.<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">Coq</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="var">Strings.String</span>.<br/>
<span class="id" title="keyword">Import</span> <span class="id" title="var">List.ListNotations</span>.<br/>
<span class="id" title="keyword">Open</span> <span class="id" title="keyword">Scope</span> <span class="id" title="var">list_scope</span>.<br/>
<span class="id" title="keyword">Open</span> <span class="id" title="keyword">Scope</span> <span class="id" title="var">Z_scope</span>.<br/>
<span class="id" title="keyword">Open</span> <span class="id" title="keyword">Scope</span> <span class="id" title="var">bool_scope</span>.<br/>

<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">Hacspec</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="var">ChoiceEquality</span>.<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">Hacspec</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="var">LocationUtility</span>.<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">Hacspec</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="var">Hacspec_Lib_Comparable</span>.<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">Hacspec</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="var">Hacspec_Lib_Pre</span>.<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">Hacspec</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="var">Hacspec_Lib</span>.<br/>

<br/>
<span class="id" title="keyword">Open</span> <span class="id" title="keyword">Scope</span> <span class="id" title="var">hacspec_scope</span>.<br/>
<span class="id" title="keyword">Import</span> <span class="id" title="var">choice.Choice.Exports</span>.<br/>

<br/>
<span class="id" title="keyword">Set</span> <span class="id" title="var">Bullet</span> <span class="id" title="var">Behavior</span> "Strict Subproofs".<br/>
<span class="id" title="keyword">Set</span> <span class="id" title="var">Default</span> <span class="id" title="keyword">Goal</span> <span class="id" title="var">Selector</span> "!".<br/>
<span class="id" title="keyword">Set</span> <span class="id" title="var">Primitive</span> <span class="id" title="var">Projections</span>.<br/>

<br/>
<span class="id" title="keyword">Obligation</span> <span class="id" title="keyword">Tactic</span> :=  <span class="id" title="var">solve_ssprove_obligations</span>.<br/>

<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">HB</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="var">structures</span>.<br/>

<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">Crypt</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="var">jasmin_word</span>.<br/>

<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">Crypt</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="var">Schnorr</span> <span class="id" title="var">SigmaProtocol</span>.<br/>

<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">Relational</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="var">OrderEnrichedCategory</span> <span class="id" title="var">GenericRulesSimple</span>.<br/>

<br/>
<span class="id" title="keyword">Set</span> <span class="id" title="var">Warnings</span> "-notation-overridden,-ambiguous-paths".<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">mathcomp</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="var">all_ssreflect</span> <span class="id" title="var">all_algebra</span> <span class="id" title="var">reals</span> <span class="id" title="var">distr</span> <span class="id" title="var">realsum</span><br/>
&nbsp;&nbsp;<span class="id" title="var">fingroup.fingroup</span> <span class="id" title="var">solvable.cyclic</span> <span class="id" title="var">prime</span> <span class="id" title="var">ssrnat</span> <span class="id" title="var">ssreflect</span> <span class="id" title="var">ssrfun</span> <span class="id" title="var">ssrbool</span> <span class="id" title="var">ssrnum</span><br/>
&nbsp;&nbsp;<span class="id" title="var">eqtype</span> <span class="id" title="var">choice</span> <span class="id" title="var">seq</span>.<br/>
<span class="id" title="keyword">Set</span> <span class="id" title="var">Warnings</span> "notation-overridden,ambiguous-paths".<br/>

<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">Mon</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="var">SPropBase</span>.<br/>

<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">Crypt</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="keyword">Axioms</span> <span class="id" title="var">ChoiceAsOrd</span> <span class="id" title="var">SubDistr</span> <span class="id" title="var">Couplings</span><br/>
&nbsp;&nbsp;<span class="id" title="var">UniformDistrLemmas</span> <span class="id" title="var">FreeProbProg</span> <span class="id" title="var">Theta_dens</span> <span class="id" title="var">RulesStateProb</span> <span class="id" title="var">UniformStateProb</span><br/>
&nbsp;&nbsp;<span class="id" title="var">pkg_core_definition</span> <span class="id" title="var">choice_type</span> <span class="id" title="var">pkg_composition</span> <span class="id" title="var">pkg_rhl</span> <span class="id" title="var">Package</span> <span class="id" title="var">Prelude</span><br/>
&nbsp;&nbsp;<span class="id" title="var">SigmaProtocol</span>.<br/>

<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">Coq</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="var">Utf8</span>.<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">extructures</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="var">ord</span> <span class="id" title="var">fset</span> <span class="id" title="var">fmap</span>.<br/>

<br/>
<span class="id" title="keyword">From</span> <span class="id" title="keyword">Equations</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="keyword">Equations</span>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="var">Equations.Prop.DepElim</span>.<br/>

<br/>
<span class="id" title="keyword">Set</span> <span class="id" title="keyword">Equations</span> <span class="id" title="var">With</span> <span class="id" title="var">UIP</span>.<br/>

<br/>
<span class="id" title="keyword">Set</span> <span class="id" title="var">Bullet</span> <span class="id" title="var">Behavior</span> "Strict Subproofs".<br/>
<span class="id" title="keyword">Set</span> <span class="id" title="var">Default</span> <span class="id" title="keyword">Goal</span> <span class="id" title="var">Selector</span> "!".<br/>
<span class="id" title="keyword">Set</span> <span class="id" title="var">Primitive</span> <span class="id" title="var">Projections</span>.<br/>

<br/>
<span class="id" title="keyword">Local Open</span> <span class="id" title="keyword">Scope</span> <span class="id" title="var">ring_scope</span>.<br/>
<span class="id" title="keyword">Import</span> <span class="id" title="var">GroupScope</span> <span class="id" title="var">GRing.Theory</span>.<br/>

<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="var">Lia</span>.<br/>

<br/>
<span class="id" title="keyword">Import</span> <span class="id" title="var">PackageNotation</span>.<br/>
</div>
</details><div class="code">

<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">KeyScheduleTheorem</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="keyword">Types</span>.<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">KeyScheduleTheorem</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="var">ExtraTypes</span>.<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">KeyScheduleTheorem</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="var">ssp_helper</span>.<br/>

<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">KeyScheduleTheorem.Utility</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="var">random_util</span>.<br/>
<span class="id" title="keyword">Export</span> <span class="id" title="var">random_util</span>.<br/>

<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">KeyScheduleTheorem.Utility</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="var">key_store</span>.<br/>
<span class="id" title="keyword">Export</span> <span class="id" title="var">key_store</span>.<br/>

<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">KeyScheduleTheorem.Utility</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="var">map_with_in</span>.<br/>
<span class="id" title="keyword">Export</span> <span class="id" title="var">map_with_in</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">alg</span> : <span class="id" title="var">chKey</span> → <span class="id" title="var">chHash</span> :=<br/>
&nbsp;&nbsp;(<span class="id" title="keyword">fun</span> <span class="id" title="var">x</span> ⇒ <span class="id" title="var">fto</span> (<span class="id" title="var">fst</span> (<span class="id" title="var">otf</span> <span class="id" title="var">x</span>))).<br/>
<span class="id" title="keyword">Axiom</span> <span class="id" title="var">alg2</span> : <span class="id" title="var">chHandle</span> → <span class="id" title="var">chName</span>. <span class="id" title="keyword">Definition</span> <span class="id" title="var">tag</span> : <span class="id" title="var">chHash</span> → <span class="id" title="var">chName</span> → <span class="id" title="var">chKey</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">fun</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span> ⇒ <span class="id" title="var">fto</span> (<span class="id" title="var">pair</span> (<span class="id" title="var">otf</span> <span class="id" title="var">x</span>) (<span class="id" title="var">otf</span> <span class="id" title="var">y</span>)).<br/>

<br/>
</div>

<div class="doc">
<a id="lab10"></a><h1 class="section">Helper definitions</h1>

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">ℓ_raw_packages</span> (<span class="id" title="var">d</span> : <span class="id" title="var">nat</span>)<br/>
&nbsp;&nbsp;(<span class="id" title="var">p</span> : <span class="id" title="keyword">∀</span> (<span class="id" title="var">n</span> : <span class="id" title="var">nat</span>), (<span class="id" title="var">n</span> ≤ <span class="id" title="var">d</span>)%<span class="id" title="var">nat</span> →  <span class="id" title="var">raw_package</span>)<br/>
&nbsp;&nbsp;: <span class="id" title="var">raw_package</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="var">map_with_in_num_upper</span> <span class="id" title="var">d</span> <span class="id" title="var">d</span> (<span class="id" title="var">H_le</span> := <span class="id" title="var">leqnn</span> <span class="id" title="var">d</span>) <span class="id" title="var">p</span>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab11"></a><h1 class="section">Ltac</h1>

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Ltac</span> <span class="id" title="var">solve_Parable</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| [ |- <span class="id" title="keyword">context</span> [ <span class="id" title="var">Parable</span> (<span class="id" title="var">trim</span> <span class="id" title="var">_</span> ?<span class="id" title="var">a</span>) (<span class="id" title="var">trim</span> <span class="id" title="var">_</span> ?<span class="id" title="var">b</span>) ] ] ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">parable_trim</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id" title="tactic">try</span> (<span class="id" title="tactic">unfold</span> <span class="id" title="var">idents</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id" title="tactic">rewrite</span> &lt;- !<span class="id" title="var">fset1E</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id" title="tactic">rewrite</span> !<span class="id" title="var">imfset1</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> <span class="id" title="var">fdisjoint1s</span>)<br/>
&nbsp;&nbsp;| <span class="id" title="var">Ha</span> : <span class="id" title="var">trimmed</span> ?<span class="id" title="var">Ea</span> ?<span class="id" title="var">a</span> ,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">Hb</span> : <span class="id" title="var">trimmed</span> ?<span class="id" title="var">Eb</span> ?<span class="id" title="var">b</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;|- <span class="id" title="keyword">context</span> [ <span class="id" title="var">Parable</span> ?<span class="id" title="var">a</span> ?<span class="id" title="var">b</span> ] ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">Ha</span> ; <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">Hb</span> ; <span class="id" title="var">solve_Parable</span><br/>
&nbsp;&nbsp;| <span class="id" title="var">Ha</span> : <span class="id" title="var">trimmed</span> ?<span class="id" title="var">Ea</span> ?<span class="id" title="var">a</span> ,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">Hb</span> : <span class="id" title="var">trimmed</span> ?<span class="id" title="var">Eb</span> ?<span class="id" title="var">b</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;|- <span class="id" title="keyword">context</span> [ <span class="id" title="var">Parable</span> ?<span class="id" title="var">a</span> (?<span class="id" title="var">b</span> ∘ ?<span class="id" title="var">c</span>) ] ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">Ha</span> ;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">Hb</span> ;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">erewrite</span> !<span class="id" title="var">link_trim_commut</span> ;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">solve_Parable</span><br/>
&nbsp;&nbsp;| <span class="id" title="var">Ha</span> : <span class="id" title="var">trimmed</span> ?<span class="id" title="var">Ea</span> ?<span class="id" title="var">a</span> ,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">Hb</span> : <span class="id" title="var">trimmed</span> ?<span class="id" title="var">Eb</span> ?<span class="id" title="var">b</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;|- <span class="id" title="keyword">context</span> [ <span class="id" title="var">Parable</span> (?<span class="id" title="var">b</span> ∘ ?<span class="id" title="var">c</span>) ?<span class="id" title="var">a</span> ] ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">Ha</span> ;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">Hb</span> ;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">erewrite</span> !<span class="id" title="var">link_trim_commut</span> ;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">solve_Parable</span><br/>
&nbsp;&nbsp;| |- <span class="id" title="keyword">context</span> [ <span class="id" title="var">Parable</span> ?<span class="id" title="var">a</span> (<span class="id" title="var">par</span> ?<span class="id" title="var">b</span> ?<span class="id" title="var">c</span>) ] ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">parable_par_r</span> ; <span class="id" title="var">solve_Parable</span><br/>
&nbsp;&nbsp;| |- <span class="id" title="keyword">context</span> [ <span class="id" title="var">Parable</span> (<span class="id" title="var">par</span> ?<span class="id" title="var">a</span> ?<span class="id" title="var">b</span>) ?<span class="id" title="var">c</span> ] ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">parable_par_l</span> ; <span class="id" title="var">solve_Parable</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Ltac</span> <span class="id" title="var">solve_trimmed</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| |- <span class="id" title="keyword">context</span> [ <span class="id" title="var">trimmed</span> (?<span class="id" title="var">IA</span> :|: ?<span class="id" title="var">IB</span>) (<span class="id" title="var">par</span> (<span class="id" title="var">trim</span> <span class="id" title="var">_</span> ?<span class="id" title="var">a</span>) (<span class="id" title="var">trim</span> <span class="id" title="var">_</span> ?<span class="id" title="var">b</span>)) ] ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="var">trimmed</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id" title="tactic">rewrite</span> <span class="id" title="var">trimmed_par</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; [ <span class="id" title="tactic">reflexivity</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="tactic">refine</span> <span class="id" title="var">parable</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id" title="var">solve_Parable</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id" title="tactic">unfold</span> <span class="id" title="var">idents</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id" title="var">solve_imfset_disjoint</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="tactic">unfold</span> <span class="id" title="var">trimmed</span> ; <span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> <span class="id" title="var">trim_idemp</span> ..<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;]<br/>
&nbsp;&nbsp;| |- <span class="id" title="keyword">context</span> [ <span class="id" title="var">trimmed</span> (?<span class="id" title="var">IA</span> :|: ?<span class="id" title="var">IBC</span>) (<span class="id" title="var">par</span> ?<span class="id" title="var">a</span> (<span class="id" title="var">par</span> ?<span class="id" title="var">b</span> ?<span class="id" title="var">c</span>)) ] ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">H</span> := <span class="id" title="tactic">fresh</span> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">H</span> : <span class="id" title="var">trimmed</span> <span class="id" title="var">IBC</span> (<span class="id" title="var">par</span> <span class="id" title="var">b</span> <span class="id" title="var">c</span>)) <span class="id" title="tactic">by</span> <span class="id" title="var">solve_trimmed</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">H</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id" title="tactic">clear</span> <span class="id" title="var">H</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id" title="var">solve_trimmed</span><br/>
&nbsp;&nbsp;| |- <span class="id" title="keyword">context</span> [ <span class="id" title="var">trimmed</span> (?<span class="id" title="var">IAB</span> :|: ?<span class="id" title="var">IB</span>) (<span class="id" title="var">par</span> (<span class="id" title="var">par</span> ?<span class="id" title="var">a</span> ?<span class="id" title="var">b</span>) ?<span class="id" title="var">c</span>) ] ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">H</span> := <span class="id" title="tactic">fresh</span> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">H</span> : <span class="id" title="var">trimmed</span> <span class="id" title="var">IAB</span> (<span class="id" title="var">par</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span>)) <span class="id" title="tactic">by</span> <span class="id" title="var">solve_trimmed</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">H</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id" title="tactic">clear</span> <span class="id" title="var">H</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id" title="var">solve_trimmed</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Ltac</span> <span class="id" title="var">trim_is_interface</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="tactic">setoid_rewrite</span> <span class="id" title="var">filterm_set</span> ; <span class="id" title="tactic">fold</span> <span class="id" title="var">chElement</span> ;<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">fset1E</span> ;<br/>
&nbsp;&nbsp;<span class="id" title="tactic">setoid_rewrite</span> <span class="id" title="var">in_fset1</span> ;<br/>
&nbsp;&nbsp;<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">eqxx</span> ;<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">filterm0</span> ;<br/>
&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>

<br/>
<span class="id" title="keyword">Ltac</span> <span class="id" title="var">trimmed_package</span> <span class="id" title="var">p</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="keyword">type</span> <span class="id" title="keyword">of</span> <span class="id" title="var">p</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <span class="id" title="var">package</span> ?<span class="id" title="var">L</span> ?<span class="id" title="var">I</span> ?<span class="id" title="var">E</span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">trimmed</span> <span class="id" title="var">E</span> <span class="id" title="var">p</span>) <span class="id" title="tactic">by</span> <span class="id" title="var">now</span> <span class="id" title="tactic">unfold</span> <span class="id" title="var">trimmed</span> ; <span class="id" title="var">trim_is_interface</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab12"></a><h1 class="section">Package composition</h1>

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">parallel_raw</span> (<span class="id" title="var">p</span> : <span class="id" title="var">list</span> <span class="id" title="var">raw_package</span>) : <span class="id" title="var">raw_package</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="var">p</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| [] ⇒ <span class="id" title="var">emptym</span><br/>
&nbsp;&nbsp;| (<span class="id" title="var">x</span> :: <span class="id" title="var">xs</span>) ⇒ <span class="id" title="var">List.fold_left</span> <span class="id" title="var">par</span> <span class="id" title="var">xs</span> <span class="id" title="var">x</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Theorem</span> <span class="id" title="var">valid_parable_cons</span> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">∀</span> (<span class="id" title="var">a</span> : <span class="id" title="var">raw_package</span>) (<span class="id" title="var">P</span> : <span class="id" title="var">list</span> <span class="id" title="var">raw_package</span>) <span class="id" title="var">L</span> <span class="id" title="var">I</span> <span class="id" title="var">E1</span> <span class="id" title="var">E2</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">Parable</span> <span class="id" title="var">a</span> (<span class="id" title="var">parallel_raw</span> <span class="id" title="var">P</span>) →<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">valid_package</span> <span class="id" title="var">L</span> <span class="id" title="var">I</span> <span class="id" title="var">E1</span> <span class="id" title="var">a</span> →<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">valid_package</span> <span class="id" title="var">L</span> <span class="id" title="var">I</span> <span class="id" title="var">E2</span> (<span class="id" title="var">parallel_raw</span> <span class="id" title="var">P</span>) →<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">valid_package</span> <span class="id" title="var">L</span> <span class="id" title="var">I</span> (<span class="id" title="var">E1</span> :|: <span class="id" title="var">E2</span>) (<span class="id" title="var">parallel_raw</span> (<span class="id" title="var">a</span> :: <span class="id" title="var">P</span>)).<br/>

<br/>
<span class="id" title="keyword">Fixpoint</span> <span class="id" title="var">valid_pairs</span> <span class="id" title="var">L</span> <span class="id" title="var">I</span> <span class="id" title="var">E</span> <span class="id" title="var">P</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="var">I</span>, <span class="id" title="var">E</span>, <span class="id" title="var">P</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| [], [], [] ⇒ <span class="id" title="var">True</span><br/>
&nbsp;&nbsp;| [<span class="id" title="var">i</span>], [<span class="id" title="var">e</span>], [<span class="id" title="var">p</span>] ⇒ <span class="id" title="var">valid_package</span> <span class="id" title="var">L</span> <span class="id" title="var">i</span> <span class="id" title="var">e</span> <span class="id" title="var">p</span><br/>
&nbsp;&nbsp;| (<span class="id" title="var">i</span> :: <span class="id" title="var">I'</span>), (<span class="id" title="var">e</span> :: <span class="id" title="var">E'</span>), (<span class="id" title="var">p</span> :: <span class="id" title="var">P'</span>) ⇒ <span class="id" title="var">valid_package</span> <span class="id" title="var">L</span> <span class="id" title="var">i</span> <span class="id" title="var">e</span> <span class="id" title="var">p</span> ∧ <span class="id" title="var">valid_pairs</span> <span class="id" title="var">L</span> <span class="id" title="var">I'</span> <span class="id" title="var">E'</span> <span class="id" title="var">P'</span><br/>
&nbsp;&nbsp;| <span class="id" title="var">_</span>, <span class="id" title="var">_</span>, <span class="id" title="var">_</span> ⇒ <span class="id" title="var">False</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Fixpoint</span> <span class="id" title="var">trimmed_pairs</span> <span class="id" title="var">E</span> <span class="id" title="var">P</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="var">E</span>, <span class="id" title="var">P</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| [], [] ⇒ <span class="id" title="var">True</span><br/>
&nbsp;&nbsp;| [<span class="id" title="var">e</span>], [<span class="id" title="var">p</span>] ⇒ <span class="id" title="var">trimmed</span> <span class="id" title="var">e</span> <span class="id" title="var">p</span><br/>
&nbsp;&nbsp;| (<span class="id" title="var">e</span> :: <span class="id" title="var">E'</span>), (<span class="id" title="var">p</span> :: <span class="id" title="var">P'</span>) ⇒ <span class="id" title="var">trimmed</span> <span class="id" title="var">e</span> <span class="id" title="var">p</span> ∧ <span class="id" title="var">trimmed_pairs</span> <span class="id" title="var">E'</span> <span class="id" title="var">P'</span><br/>
&nbsp;&nbsp;| <span class="id" title="var">_</span>, <span class="id" title="var">_</span> ⇒ <span class="id" title="var">False</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Fixpoint</span> <span class="id" title="var">all_idents_disjoint</span> {<span class="id" title="var">A</span>} <span class="id" title="var">f</span> <span class="id" title="var">I</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="var">I</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| [] | [<span class="id" title="var">_</span>] ⇒ <span class="id" title="var">True</span><br/>
&nbsp;&nbsp;| (<span class="id" title="var">x</span> :: <span class="id" title="var">xs</span>) ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">idents</span> (<span class="id" title="var">f</span> <span class="id" title="var">x</span>) :#: <span class="id" title="var">idents</span> (<span class="id" title="var">interface_foreach</span> (<span class="id" title="var">A</span> := <span class="id" title="var">A</span>) <span class="id" title="var">f</span> <span class="id" title="var">xs</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;∧ <span class="id" title="var">all_idents_disjoint</span> <span class="id" title="var">f</span> <span class="id" title="var">xs</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">trimmed_parallel_raw</span> : <span class="id" title="keyword">∀</span> {<span class="id" title="var">A</span> : <span class="id" title="var">eqType</span>} {<span class="id" title="var">f</span> <span class="id" title="var">I</span> <span class="id" title="var">L</span>},<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(∀ <span class="id" title="var">x</span> <span class="id" title="var">y</span> : <span class="id" title="var">A</span>, <span class="id" title="var">x</span> ≠ <span class="id" title="var">y</span> → <span class="id" title="var">idents</span> (<span class="id" title="var">f</span> <span class="id" title="var">x</span>) :#: <span class="id" title="var">idents</span> (<span class="id" title="var">f</span> <span class="id" title="var">y</span>)) → <span class="id" title="var">uniq</span> <span class="id" title="var">I</span> →<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">trimmed_pairs</span> (<span class="id" title="var">List.map</span> <span class="id" title="var">f</span> <span class="id" title="var">I</span>) <span class="id" title="var">L</span> →<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">trimmed</span> (<span class="id" title="var">interface_foreach</span> (<span class="id" title="var">A</span> := <span class="id" title="var">A</span>) <span class="id" title="var">f</span> <span class="id" title="var">I</span>) (<span class="id" title="var">parallel_raw</span> <span class="id" title="var">L</span>).<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">parallel_raw_cons</span> : <span class="id" title="keyword">∀</span> <span class="id" title="var">n</span> <span class="id" title="var">E</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">parallel_raw</span> (<span class="id" title="var">n</span> :: <span class="id" title="var">E</span>) = <span class="id" title="var">par</span> <span class="id" title="var">n</span> (<span class="id" title="var">parallel_raw</span> <span class="id" title="var">E</span>).<br/>

<br/>
<span class="id" title="keyword">Theorem</span> <span class="id" title="var">valid_parable</span> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">∀</span> {<span class="id" title="var">N</span> : <span class="id" title="var">eqType</span>} (<span class="id" title="var">P</span> : <span class="id" title="var">list</span> <span class="id" title="var">raw_package</span>) <span class="id" title="var">f</span> <span class="id" title="var">g</span> <span class="id" title="var">L</span> <span class="id" title="var">I</span> <span class="id" title="var">E</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(∀ <span class="id" title="var">x</span> <span class="id" title="var">y</span>, <span class="id" title="var">x</span> ≠ <span class="id" title="var">y</span> → <span class="id" title="var">idents</span> (<span class="id" title="var">f</span> <span class="id" title="var">x</span>) :#: <span class="id" title="var">idents</span> (<span class="id" title="var">f</span> <span class="id" title="var">y</span>)) → <span class="id" title="var">uniq</span> <span class="id" title="var">E</span> →<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">trimmed_pairs</span> (<span class="id" title="var">List.map</span> <span class="id" title="var">f</span> <span class="id" title="var">E</span>) <span class="id" title="var">P</span> →<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">valid_pairs</span> <span class="id" title="var">L</span> (<span class="id" title="var">List.map</span> <span class="id" title="var">g</span> <span class="id" title="var">I</span>) (<span class="id" title="var">List.map</span> <span class="id" title="var">f</span> <span class="id" title="var">E</span>) <span class="id" title="var">P</span> →<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">valid_package</span> <span class="id" title="var">L</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">interface_foreach</span> (<span class="id" title="var">A</span> := <span class="id" title="var">N</span>) <span class="id" title="var">g</span> <span class="id" title="var">I</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">interface_foreach</span> (<span class="id" title="var">A</span> := <span class="id" title="var">N</span>) <span class="id" title="var">f</span> <span class="id" title="var">E</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">parallel_raw</span> <span class="id" title="var">P</span>).<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">trimmed_pairs_cons</span> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">∀</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span> <span class="id" title="var">c</span> <span class="id" title="var">d</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">trimmed_pairs</span> (<span class="id" title="var">a</span> :: <span class="id" title="var">b</span>) (<span class="id" title="var">c</span> :: <span class="id" title="var">d</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;↔ (<span class="id" title="var">trimmed</span> <span class="id" title="var">a</span> <span class="id" title="var">c</span> ∧ <span class="id" title="var">trimmed_pairs</span> <span class="id" title="var">b</span> <span class="id" title="var">d</span>).<br/>
 
<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">valid_pairs_cons</span> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">∀</span> <span class="id" title="var">L</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span> <span class="id" title="var">c</span> <span class="id" title="var">d</span> <span class="id" title="var">e</span> <span class="id" title="var">f</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">valid_pairs</span> <span class="id" title="var">L</span> (<span class="id" title="var">a</span> :: <span class="id" title="var">b</span>) (<span class="id" title="var">c</span> :: <span class="id" title="var">d</span>) (<span class="id" title="var">e</span> :: <span class="id" title="var">f</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;↔ (<span class="id" title="var">valid_package</span> <span class="id" title="var">L</span> <span class="id" title="var">a</span> <span class="id" title="var">c</span> <span class="id" title="var">e</span> ∧ <span class="id" title="var">valid_pairs</span> <span class="id" title="var">L</span> <span class="id" title="var">b</span> <span class="id" title="var">d</span> <span class="id" title="var">f</span>).<br/>
 
<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">trimmed_pairs_map</span> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">∀</span> {<span class="id" title="var">A</span> : <span class="id" title="keyword">Type</span>} (<span class="id" title="var">f</span> : <span class="id" title="var">A</span> → <span class="id" title="var">Interface</span>) <span class="id" title="var">g</span> <span class="id" title="var">l</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="keyword">∀</span> <span class="id" title="var">a</span>, <span class="id" title="var">trimmed</span> (<span class="id" title="var">f</span> <span class="id" title="var">a</span>) (<span class="id" title="var">g</span> <span class="id" title="var">a</span>)) →<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">trimmed_pairs</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">List.map</span> <span class="id" title="var">f</span> <span class="id" title="var">l</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">List.map</span> <span class="id" title="var">g</span> <span class="id" title="var">l</span>).<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">valid_pairs_map</span> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">∀</span> {<span class="id" title="var">A</span> : <span class="id" title="keyword">Type</span>} <span class="id" title="var">L</span> <span class="id" title="var">i</span> (<span class="id" title="var">f</span> : <span class="id" title="var">A</span> → <span class="id" title="var">Interface</span>) <span class="id" title="var">g</span> <span class="id" title="var">l</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="keyword">∀</span> <span class="id" title="var">a</span>, <span class="id" title="var">valid_package</span> <span class="id" title="var">L</span> (<span class="id" title="var">i</span> <span class="id" title="var">a</span>) (<span class="id" title="var">f</span> <span class="id" title="var">a</span>) (<span class="id" title="var">g</span> <span class="id" title="var">a</span>)) →<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">valid_pairs</span> <span class="id" title="var">L</span> (<span class="id" title="var">List.map</span> <span class="id" title="var">i</span> <span class="id" title="var">l</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">List.map</span> <span class="id" title="var">f</span> <span class="id" title="var">l</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">List.map</span> <span class="id" title="var">g</span> <span class="id" title="var">l</span>).<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">valid_pairs_map_with_in_rel</span> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">∀</span> {<span class="id" title="var">A</span> : <span class="id" title="var">eqType</span>} <span class="id" title="var">L</span> <span class="id" title="var">l</span> <span class="id" title="var">l'</span> <span class="id" title="var">H_in</span> <span class="id" title="var">i</span> (<span class="id" title="var">f</span> : <span class="id" title="keyword">∀</span> (<span class="id" title="var">a</span> : <span class="id" title="var">A</span>), (<span class="id" title="var">a</span> \<span class="id" title="tactic">in</span> <span class="id" title="var">l</span>) → <span class="id" title="var">Interface</span>) <span class="id" title="var">g</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="keyword">∀</span> <span class="id" title="var">a</span> (<span class="id" title="var">H</span> : <span class="id" title="var">a</span> \<span class="id" title="tactic">in</span> <span class="id" title="var">l</span>), <span class="id" title="var">valid_package</span> <span class="id" title="var">L</span> (<span class="id" title="var">i</span> <span class="id" title="var">a</span> <span class="id" title="var">H</span>) (<span class="id" title="var">f</span> <span class="id" title="var">a</span> <span class="id" title="var">H</span>) (<span class="id" title="var">g</span> <span class="id" title="var">a</span> <span class="id" title="var">H</span>)) →<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">valid_pairs</span> <span class="id" title="var">L</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">map_with_in_rel</span> <span class="id" title="var">l</span> <span class="id" title="var">l'</span> (<span class="id" title="var">H_in</span> := <span class="id" title="var">H_in</span>) <span class="id" title="var">i</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">map_with_in_rel</span> <span class="id" title="var">l</span> <span class="id" title="var">l'</span> (<span class="id" title="var">H_in</span> := <span class="id" title="var">H_in</span>) <span class="id" title="var">f</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">map_with_in_rel</span> <span class="id" title="var">l</span> <span class="id" title="var">l'</span> (<span class="id" title="var">H_in</span> := <span class="id" title="var">H_in</span>) <span class="id" title="var">g</span>).<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">valid_pairs_map_with_in_rel_map</span> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">∀</span> {<span class="id" title="var">A</span> : <span class="id" title="var">eqType</span>} <span class="id" title="var">L</span> <span class="id" title="var">l</span> <span class="id" title="var">l'</span> <span class="id" title="var">H_in</span> <span class="id" title="var">i</span> (<span class="id" title="var">f</span> : <span class="id" title="keyword">∀</span> (<span class="id" title="var">a</span> : <span class="id" title="var">A</span>), (<span class="id" title="var">a</span> \<span class="id" title="tactic">in</span> <span class="id" title="var">l</span>) → <span class="id" title="var">Interface</span>) <span class="id" title="var">g</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="keyword">∀</span> <span class="id" title="var">a</span> (<span class="id" title="var">H</span> : <span class="id" title="var">a</span> \<span class="id" title="tactic">in</span> <span class="id" title="var">l</span>), <span class="id" title="var">valid_package</span> <span class="id" title="var">L</span> (<span class="id" title="var">i</span> <span class="id" title="var">a</span>) (<span class="id" title="var">f</span> <span class="id" title="var">a</span> <span class="id" title="var">H</span>) (<span class="id" title="var">g</span> <span class="id" title="var">a</span> <span class="id" title="var">H</span>)) →<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">valid_pairs</span> <span class="id" title="var">L</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">List.map</span> <span class="id" title="var">i</span> <span class="id" title="var">l'</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">map_with_in_rel</span> <span class="id" title="var">l</span> <span class="id" title="var">l'</span> (<span class="id" title="var">H_in</span> := <span class="id" title="var">H_in</span>) <span class="id" title="var">f</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">map_with_in_rel</span> <span class="id" title="var">l</span> <span class="id" title="var">l'</span> (<span class="id" title="var">H_in</span> := <span class="id" title="var">H_in</span>) <span class="id" title="var">g</span>).<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">trimmed_pairs_map_with_in</span> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">∀</span> {<span class="id" title="var">A</span> : <span class="id" title="var">eqType</span>} (<span class="id" title="var">l</span> : <span class="id" title="var">list</span> <span class="id" title="var">A</span>) (<span class="id" title="var">f</span> : <span class="id" title="keyword">∀</span> (<span class="id" title="var">a</span> : <span class="id" title="var">A</span>), (<span class="id" title="var">a</span> \<span class="id" title="tactic">in</span> <span class="id" title="var">l</span>) → <span class="id" title="var">Interface</span>) <span class="id" title="var">g</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="keyword">∀</span> <span class="id" title="var">a</span> (<span class="id" title="var">H</span> : <span class="id" title="var">a</span> \<span class="id" title="tactic">in</span> <span class="id" title="var">l</span>), <span class="id" title="var">trimmed</span> (<span class="id" title="var">f</span> <span class="id" title="var">a</span> <span class="id" title="var">H</span>) (<span class="id" title="var">g</span> <span class="id" title="var">a</span> <span class="id" title="var">H</span>)) →<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">trimmed_pairs</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">map_with_in</span> <span class="id" title="var">l</span> <span class="id" title="var">f</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">map_with_in</span> <span class="id" title="var">l</span> <span class="id" title="var">g</span>).<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">trimmed_pairs_map_with_in_rel</span> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">∀</span> {<span class="id" title="var">A</span> : <span class="id" title="var">eqType</span>} (<span class="id" title="var">l</span> <span class="id" title="var">l'</span> : <span class="id" title="var">list</span> <span class="id" title="var">A</span>) <span class="id" title="var">H_in</span> (<span class="id" title="var">f</span> : <span class="id" title="keyword">∀</span> (<span class="id" title="var">a</span> : <span class="id" title="var">A</span>), (<span class="id" title="var">a</span> \<span class="id" title="tactic">in</span> <span class="id" title="var">l</span>) → <span class="id" title="var">Interface</span>) <span class="id" title="var">g</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="keyword">∀</span> <span class="id" title="var">a</span> (<span class="id" title="var">H</span> : <span class="id" title="var">a</span> \<span class="id" title="tactic">in</span> <span class="id" title="var">l</span>), <span class="id" title="var">trimmed</span> (<span class="id" title="var">f</span> <span class="id" title="var">a</span> <span class="id" title="var">H</span>) (<span class="id" title="var">g</span> <span class="id" title="var">a</span> <span class="id" title="var">H</span>)) →<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">trimmed_pairs</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">map_with_in_rel</span> <span class="id" title="var">l</span> <span class="id" title="var">l'</span> (<span class="id" title="var">H_in</span> := <span class="id" title="var">H_in</span>) <span class="id" title="var">f</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">map_with_in_rel</span> <span class="id" title="var">l</span> <span class="id" title="var">l'</span> (<span class="id" title="var">H_in</span> := <span class="id" title="var">H_in</span>) <span class="id" title="var">g</span>).<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">parallel_package</span><br/>
&nbsp;&nbsp;{<span class="id" title="var">A</span> : <span class="id" title="var">eqType</span>} (<span class="id" title="var">d</span> : <span class="id" title="var">nat</span>) {<span class="id" title="var">L</span>} {<span class="id" title="var">f</span> : <span class="id" title="var">A</span> → <span class="id" title="var">_</span>} {<span class="id" title="var">g</span>} <span class="id" title="var">Names</span><br/>
&nbsp;&nbsp;(<span class="id" title="var">i</span> : <span class="id" title="keyword">∀</span> (<span class="id" title="var">a</span> : <span class="id" title="var">A</span>), <span class="id" title="var">package</span> <span class="id" title="var">L</span> (<span class="id" title="var">f</span> <span class="id" title="var">a</span>) (<span class="id" title="var">g</span> <span class="id" title="var">a</span>))<br/>
&nbsp;&nbsp;(<span class="id" title="var">H</span> : ∀ <span class="id" title="var">x</span> <span class="id" title="var">y</span> : <span class="id" title="var">A</span>, <span class="id" title="var">x</span> ≠ <span class="id" title="var">y</span> → <span class="id" title="var">idents</span> (<span class="id" title="var">g</span> <span class="id" title="var">x</span>) :#: <span class="id" title="var">idents</span> (<span class="id" title="var">g</span> <span class="id" title="var">y</span>))<br/>
&nbsp;&nbsp;(<span class="id" title="var">H1</span> : ∀ <span class="id" title="var">a</span> : <span class="id" title="var">A</span>, <span class="id" title="var">trimmed</span> (<span class="id" title="var">g</span> <span class="id" title="var">a</span>) (<span class="id" title="var">i</span> <span class="id" title="var">a</span>))<br/>
&nbsp;&nbsp;(<span class="id" title="var">H3</span> : <span class="id" title="var">uniq</span> <span class="id" title="var">Names</span>) :<br/>
&nbsp;&nbsp;<span class="id" title="var">package</span> <span class="id" title="var">L</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">interface_foreach</span> <span class="id" title="var">f</span> <span class="id" title="var">Names</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">interface_foreach</span> <span class="id" title="var">g</span> <span class="id" title="var">Names</span>) :=<br/>
&nbsp;&nbsp;{<span class="id" title="var">package</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">parallel_raw</span> <span class="id" title="var">_</span> #<span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">valid_parable</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">H</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">H3</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">trimmed_pairs_map</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">H1</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">valid_pairs_map</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">m</span> ⇒ <span class="id" title="var">pack_valid</span> (<span class="id" title="var">i</span> <span class="id" title="var">m</span>))) }.<br/>

<br/>
<span class="id" title="keyword">Theorem</span> <span class="id" title="var">valid_parable_map_with_in_rel</span> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">∀</span> {<span class="id" title="var">N</span> : <span class="id" title="var">eqType</span>} (<span class="id" title="var">P</span> : <span class="id" title="var">list</span> <span class="id" title="var">raw_package</span>) <span class="id" title="var">L</span> <span class="id" title="var">I</span> <span class="id" title="var">E2</span> <span class="id" title="var">E1</span> <span class="id" title="var">H_in</span> <span class="id" title="var">f</span> <span class="id" title="var">g</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(∀ (<span class="id" title="var">x</span> <span class="id" title="var">y</span> : <span class="id" title="var">N</span>) <span class="id" title="var">Hx</span> <span class="id" title="var">Hy</span>, <span class="id" title="var">x</span> ≠ <span class="id" title="var">y</span> → <span class="id" title="var">idents</span> (<span class="id" title="var">f</span> <span class="id" title="var">x</span> <span class="id" title="var">Hx</span>) :#: <span class="id" title="var">idents</span> (<span class="id" title="var">f</span> <span class="id" title="var">y</span> <span class="id" title="var">Hy</span>)) →<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">uniq</span> <span class="id" title="var">E1</span> →<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">trimmed_pairs</span> (<span class="id" title="var">map_with_in_rel</span> <span class="id" title="var">E2</span> <span class="id" title="var">E1</span> (<span class="id" title="var">H_in</span> := <span class="id" title="var">H_in</span>) <span class="id" title="var">f</span>) <span class="id" title="var">P</span> →<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">valid_pairs</span> <span class="id" title="var">L</span> (<span class="id" title="var">List.map</span> <span class="id" title="var">g</span> <span class="id" title="var">I</span>) (<span class="id" title="var">map_with_in_rel</span> <span class="id" title="var">E2</span> <span class="id" title="var">E1</span> (<span class="id" title="var">H_in</span> := <span class="id" title="var">H_in</span>) <span class="id" title="var">f</span>) <span class="id" title="var">P</span> →<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">valid_package</span> <span class="id" title="var">L</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">interface_foreach</span> (<span class="id" title="var">A</span> := <span class="id" title="var">N</span>) <span class="id" title="var">g</span> <span class="id" title="var">I</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">interface_foreach_in_rel</span> <span class="id" title="var">E2</span> <span class="id" title="var">E1</span> (<span class="id" title="var">H_in</span> := <span class="id" title="var">H_in</span>) <span class="id" title="var">f</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">parallel_raw</span> <span class="id" title="var">P</span>).<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">parallel_package_with_in_rel</span><br/>
&nbsp;&nbsp;{<span class="id" title="var">A</span> : <span class="id" title="var">eqType</span>} (<span class="id" title="var">d</span> : <span class="id" title="var">nat</span>) {<span class="id" title="var">L</span>} <span class="id" title="var">Names</span> {<span class="id" title="var">f</span> : <span class="id" title="var">A</span> → <span class="id" title="var">_</span>} {<span class="id" title="var">g</span> : <span class="id" title="keyword">∀</span> (<span class="id" title="var">a</span> : <span class="id" title="var">A</span>), (<span class="id" title="var">a</span> \<span class="id" title="tactic">in</span> <span class="id" title="var">Names</span>) → <span class="id" title="var">_</span>}<br/>
&nbsp;&nbsp;(<span class="id" title="var">i</span> : <span class="id" title="keyword">∀</span> (<span class="id" title="var">a</span> : <span class="id" title="var">A</span>) (<span class="id" title="var">H</span> : <span class="id" title="var">a</span> \<span class="id" title="tactic">in</span> <span class="id" title="var">Names</span>), <span class="id" title="var">package</span> <span class="id" title="var">L</span> (<span class="id" title="var">f</span> <span class="id" title="var">a</span>) (<span class="id" title="var">g</span> <span class="id" title="var">a</span> <span class="id" title="var">H</span>))<br/>
&nbsp;&nbsp;(<span class="id" title="var">H</span> : ∀ (<span class="id" title="var">x</span> <span class="id" title="var">y</span> : <span class="id" title="var">A</span>) <span class="id" title="var">Hx</span> <span class="id" title="var">Hy</span>, <span class="id" title="var">x</span> ≠ <span class="id" title="var">y</span> → <span class="id" title="var">idents</span> (<span class="id" title="var">g</span> <span class="id" title="var">x</span> <span class="id" title="var">Hx</span>) :#: <span class="id" title="var">idents</span> (<span class="id" title="var">g</span> <span class="id" title="var">y</span> <span class="id" title="var">Hy</span>))<br/>
&nbsp;&nbsp;(<span class="id" title="var">H1</span> : ∀ (<span class="id" title="var">a</span> : <span class="id" title="var">A</span>) (<span class="id" title="var">H</span> : <span class="id" title="var">a</span> \<span class="id" title="tactic">in</span> <span class="id" title="var">Names</span>), <span class="id" title="var">trimmed</span> (<span class="id" title="var">g</span> <span class="id" title="var">a</span> <span class="id" title="var">H</span>) (<span class="id" title="var">i</span> <span class="id" title="var">a</span> <span class="id" title="var">H</span>))<br/>
&nbsp;&nbsp;(<span class="id" title="var">H3</span> : <span class="id" title="var">uniq</span> <span class="id" title="var">Names</span>) :<br/>
&nbsp;&nbsp;<span class="id" title="var">package</span> <span class="id" title="var">L</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">interface_foreach</span> <span class="id" title="var">f</span> <span class="id" title="var">Names</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">interface_foreach_in_rel</span> <span class="id" title="var">Names</span> <span class="id" title="var">Names</span> (<span class="id" title="var">H_in</span> := <span class="id" title="keyword">fun</span> <span class="id" title="var">a</span> <span class="id" title="var">H</span> ⇒ <span class="id" title="var">H</span>) <span class="id" title="var">g</span>).<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">all_idents_disjoint_foreach</span> :<br/>
&nbsp;&nbsp;(<span class="id" title="keyword">∀</span> {<span class="id" title="var">A</span> : <span class="id" title="var">eqType</span>} <span class="id" title="var">f</span> (<span class="id" title="var">L</span> : <span class="id" title="var">list</span> <span class="id" title="var">A</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="keyword">∀</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span>, <span class="id" title="var">x</span> ≠ <span class="id" title="var">y</span> → <span class="id" title="var">idents</span> (<span class="id" title="var">f</span> <span class="id" title="var">x</span>) :#: <span class="id" title="var">idents</span> (<span class="id" title="var">f</span> <span class="id" title="var">y</span>)) →<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">uniq</span> <span class="id" title="var">L</span> →<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">all_idents_disjoint</span> <span class="id" title="var">f</span> <span class="id" title="var">L</span>).<br/>

<br/>
<span class="id" title="keyword">Theorem</span> <span class="id" title="var">valid_forall</span> : <span class="id" title="keyword">∀</span> {<span class="id" title="var">A</span> : <span class="id" title="var">eqType</span>} {<span class="id" title="var">L</span>} <span class="id" title="var">g</span> <span class="id" title="var">f</span> <span class="id" title="var">u</span> <span class="id" title="var">Names</span> (<span class="id" title="var">d</span> <span class="id" title="var">ℓ</span> : <span class="id" title="var">nat</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">d</span> ≥ <span class="id" title="var">ℓ</span>)%<span class="id" title="var">nat</span> →<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(∀ <span class="id" title="var">x</span> <span class="id" title="var">y</span> : <span class="id" title="var">A</span>, <span class="id" title="var">x</span> ≠ <span class="id" title="var">y</span> → <span class="id" title="var">idents</span> (<span class="id" title="var">f</span> <span class="id" title="var">x</span>) :#: <span class="id" title="var">idents</span> (<span class="id" title="var">f</span> <span class="id" title="var">y</span>)) → <span class="id" title="var">uniq</span> <span class="id" title="var">Names</span> →<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">trimmed_pairs</span> (<span class="id" title="var">List.map</span> <span class="id" title="var">f</span> <span class="id" title="var">Names</span>) (<span class="id" title="var">List.map</span> (<span class="id" title="var">u</span> <span class="id" title="var">ℓ</span>) <span class="id" title="var">Names</span>) →<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">valid_pairs</span> <span class="id" title="var">L</span> (<span class="id" title="var">List.map</span> <span class="id" title="var">g</span> <span class="id" title="var">Names</span>) (<span class="id" title="var">List.map</span> <span class="id" title="var">f</span> <span class="id" title="var">Names</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">List.map</span> (<span class="id" title="var">u</span> <span class="id" title="var">ℓ</span>) <span class="id" title="var">Names</span>)) →<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">ValidPackage</span> <span class="id" title="var">L</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">interface_foreach</span> <span class="id" title="var">g</span> <span class="id" title="var">Names</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">interface_foreach</span> (<span class="id" title="var">A</span> := <span class="id" title="var">A</span>) <span class="id" title="var">f</span> <span class="id" title="var">Names</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">parallel_raw</span> (<span class="id" title="var">List.map</span> (<span class="id" title="var">u</span> <span class="id" title="var">ℓ</span>) <span class="id" title="var">Names</span>)).<br/>

<br/>
<span class="id" title="keyword">Theorem</span> <span class="id" title="var">valid_forall_map_with_in</span> : <span class="id" title="keyword">∀</span> {<span class="id" title="var">A</span> : <span class="id" title="var">eqType</span>} {<span class="id" title="var">L</span>} <span class="id" title="var">g</span> <span class="id" title="var">f</span> <span class="id" title="var">Names</span> <span class="id" title="var">u</span> (<span class="id" title="var">d</span> <span class="id" title="var">ℓ</span> : <span class="id" title="var">nat</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">d</span> ≥ <span class="id" title="var">ℓ</span>)%<span class="id" title="var">nat</span> →<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(∀ <span class="id" title="var">x</span> <span class="id" title="var">y</span> : <span class="id" title="var">A</span>, <span class="id" title="var">x</span> ≠ <span class="id" title="var">y</span> → <span class="id" title="var">idents</span> (<span class="id" title="var">f</span> <span class="id" title="var">x</span>) :#: <span class="id" title="var">idents</span> (<span class="id" title="var">f</span> <span class="id" title="var">y</span>)) → <span class="id" title="var">uniq</span> <span class="id" title="var">Names</span> →<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">trimmed_pairs</span> (<span class="id" title="var">List.map</span> <span class="id" title="var">f</span> <span class="id" title="var">Names</span>) (<span class="id" title="var">map_with_in</span> <span class="id" title="var">Names</span> (<span class="id" title="var">u</span> <span class="id" title="var">ℓ</span>)) →<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">valid_pairs</span> <span class="id" title="var">L</span> (<span class="id" title="var">List.map</span> (<span class="id" title="var">g</span>^~ <span class="id" title="var">ℓ</span>) <span class="id" title="var">Names</span>) (<span class="id" title="var">List.map</span> <span class="id" title="var">f</span> <span class="id" title="var">Names</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">map_with_in</span> <span class="id" title="var">Names</span> (<span class="id" title="var">u</span> <span class="id" title="var">ℓ</span>))) →<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">ValidPackage</span> <span class="id" title="var">L</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">interface_hierarchy_foreach</span> <span class="id" title="var">g</span> <span class="id" title="var">Names</span> <span class="id" title="var">d</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">interface_foreach</span> (<span class="id" title="var">A</span> := <span class="id" title="var">A</span>) <span class="id" title="var">f</span> <span class="id" title="var">Names</span>) (<span class="id" title="var">parallel_raw</span> (<span class="id" title="var">map_with_in</span> <span class="id" title="var">Names</span> (<span class="id" title="var">u</span> <span class="id" title="var">ℓ</span>))).<br/>

<br/>
<span class="id" title="keyword">Theorem</span> <span class="id" title="var">valid_forall_map_with_in_rel</span> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">∀</span> {<span class="id" title="var">A</span> : <span class="id" title="var">eqType</span>} {<span class="id" title="var">L</span>} <span class="id" title="var">Names</span> <span class="id" title="var">l</span> (<span class="id" title="var">d</span> : <span class="id" title="var">nat</span>) {<span class="id" title="var">g</span> <span class="id" title="var">f</span>} <span class="id" title="var">ℓ</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">H_le</span> : (<span class="id" title="var">ℓ</span> ≤ <span class="id" title="var">d</span>)%<span class="id" title="var">nat</span>) (<span class="id" title="var">u</span> : <span class="id" title="keyword">∀</span> <span class="id" title="var">a</span> (<span class="id" title="var">H</span> : <span class="id" title="var">a</span> \<span class="id" title="tactic">in</span> <span class="id" title="var">Names</span>), <span class="id" title="var">raw_package</span>) <span class="id" title="var">H_in</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(∀ (<span class="id" title="var">x</span> <span class="id" title="var">y</span> : <span class="id" title="var">A</span>), <span class="id" title="var">x</span> ≠ <span class="id" title="var">y</span> → <span class="id" title="var">idents</span> (<span class="id" title="var">f</span> <span class="id" title="var">x</span>) :#: <span class="id" title="var">idents</span> (<span class="id" title="var">f</span> <span class="id" title="var">y</span>)) →<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">uniq</span> <span class="id" title="var">l</span> →<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">trimmed_pairs</span> (<span class="id" title="var">List.map</span> <span class="id" title="var">f</span> <span class="id" title="var">l</span>) (<span class="id" title="var">map_with_in_rel</span> <span class="id" title="var">Names</span> <span class="id" title="var">l</span> (<span class="id" title="var">H_in</span> := <span class="id" title="var">H_in</span>) <span class="id" title="var">u</span>)) →<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">valid_pairs</span> <span class="id" title="var">L</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">List.map</span> <span class="id" title="var">g</span> <span class="id" title="var">l</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">List.map</span> (<span class="id" title="var">f</span>) <span class="id" title="var">l</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">map_with_in_rel</span> <span class="id" title="var">Names</span> <span class="id" title="var">l</span> (<span class="id" title="var">H_in</span> := <span class="id" title="var">H_in</span>) <span class="id" title="var">u</span>)) →<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">ValidPackage</span> <span class="id" title="var">L</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">interface_foreach</span> <span class="id" title="var">g</span> <span class="id" title="var">l</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">interface_foreach</span> <span class="id" title="var">f</span> <span class="id" title="var">l</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">parallel_raw</span> (<span class="id" title="var">map_with_in_rel</span> <span class="id" title="var">Names</span> <span class="id" title="var">l</span> (<span class="id" title="var">H_in</span> := <span class="id" title="var">H_in</span>) <span class="id" title="var">u</span>)).<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">forall_valid_from_packages</span> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">∀</span> {<span class="id" title="var">A</span> : <span class="id" title="var">eqType</span>} {<span class="id" title="var">L</span>} {<span class="id" title="var">g</span> <span class="id" title="var">f</span>} <span class="id" title="var">Names</span> <span class="id" title="var">l</span> (<span class="id" title="var">ℓ</span> : <span class="id" title="var">nat</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">u</span> : <span class="id" title="keyword">∀</span> <span class="id" title="var">a</span> (<span class="id" title="var">H</span> : <span class="id" title="var">a</span> \<span class="id" title="tactic">in</span> <span class="id" title="var">Names</span>), <span class="id" title="var">package</span> <span class="id" title="var">L</span> (<span class="id" title="var">g</span> <span class="id" title="var">a</span> <span class="id" title="var">ℓ</span>) (<span class="id" title="var">f</span> <span class="id" title="var">a</span>)) <span class="id" title="var">H_in</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">valid_pairs</span> <span class="id" title="var">L</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">List.map</span> (<span class="id" title="var">g</span>^~ <span class="id" title="var">ℓ</span>) <span class="id" title="var">l</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">List.map</span> <span class="id" title="var">f</span> <span class="id" title="var">l</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">map_with_in_rel</span> <span class="id" title="var">Names</span> <span class="id" title="var">l</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">H_in</span> := <span class="id" title="var">H_in</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">λ</span> (<span class="id" title="var">a</span> : <span class="id" title="var">A</span>) (<span class="id" title="var">H3</span> : (<span class="id" title="var">a</span> \<span class="id" title="tactic">in</span> <span class="id" title="var">Names</span>) = <span class="id" title="var">true</span>), <span class="id" title="var">pack</span> (<span class="id" title="var">u</span> <span class="id" title="var">a</span> <span class="id" title="var">H3</span>))).<br/>

<br/>
<span class="id" title="keyword">Theorem</span> <span class="id" title="var">ℓ_raw_package_trimmed</span> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">∀</span> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">d</span> : <span class="id" title="var">nat</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<span class="id" title="var">f</span> : <span class="id" title="var">nat</span> → <span class="id" title="var">Interface</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">p</span> : <span class="id" title="keyword">∀</span> (<span class="id" title="var">ℓ</span> : <span class="id" title="var">nat</span>) , (<span class="id" title="var">ℓ</span> ≤ <span class="id" title="var">d</span>)%<span class="id" title="var">N</span> → <span class="id" title="var">raw_package</span> )<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">H_trim_p</span> : <span class="id" title="keyword">∀</span> <span class="id" title="var">ℓ</span> (<span class="id" title="var">H_le</span> : (<span class="id" title="var">ℓ</span> ≤ <span class="id" title="var">d</span>)%<span class="id" title="var">N</span>), <span class="id" title="var">trimmed</span> (<span class="id" title="var">f</span> <span class="id" title="var">ℓ</span>) (<span class="id" title="var">p</span> <span class="id" title="var">ℓ</span> <span class="id" title="var">H_le</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">Hdisj</span> : ∀ (<span class="id" title="var">n</span> <span class="id" title="var">ℓ</span> : <span class="id" title="var">nat</span>) ,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">n</span> &gt; <span class="id" title="var">ℓ</span>)%<span class="id" title="var">nat</span> →<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">d</span> ≥ <span class="id" title="var">n</span>)%<span class="id" title="var">nat</span> →<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">idents</span> (<span class="id" title="var">f</span> <span class="id" title="var">ℓ</span>) :#: <span class="id" title="var">idents</span> (<span class="id" title="var">f</span> <span class="id" title="var">n</span>)),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">trimmed</span> (<span class="id" title="var">interface_hierarchy</span> <span class="id" title="var">f</span> <span class="id" title="var">d</span>) (<span class="id" title="var">ℓ_raw_packages</span> <span class="id" title="var">d</span> <span class="id" title="var">p</span>).<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">ℓ_packages</span> {<span class="id" title="var">L</span>}<br/>
&nbsp;&nbsp;(<span class="id" title="var">d</span> : <span class="id" title="var">nat</span>)<br/>
&nbsp;&nbsp;{<span class="id" title="var">g</span> : <span class="id" title="var">nat</span> → <span class="id" title="var">Interface</span>}<br/>
&nbsp;&nbsp;{<span class="id" title="var">f</span> : <span class="id" title="var">nat</span> → <span class="id" title="var">Interface</span>}<br/>
&nbsp;&nbsp;(<span class="id" title="var">p</span> : <span class="id" title="keyword">∀</span> (<span class="id" title="var">n</span> : <span class="id" title="var">nat</span>), (<span class="id" title="var">d</span> ≥ <span class="id" title="var">n</span>)%<span class="id" title="var">nat</span> → <span class="id" title="var">package</span> <span class="id" title="var">L</span> (<span class="id" title="var">g</span> <span class="id" title="var">n</span>) (<span class="id" title="var">f</span> <span class="id" title="var">n</span>))<br/>
&nbsp;&nbsp;(<span class="id" title="var">H_trim_p</span> : <span class="id" title="keyword">∀</span> <span class="id" title="var">n</span>, <span class="id" title="keyword">∀</span> (<span class="id" title="var">H_ge</span> : (<span class="id" title="var">d</span> ≥ <span class="id" title="var">n</span>)%<span class="id" title="var">nat</span>), <span class="id" title="var">trimmed</span> (<span class="id" title="var">f</span> <span class="id" title="var">n</span>) (<span class="id" title="var">p</span> <span class="id" title="var">n</span> <span class="id" title="var">H_ge</span>))<br/>
&nbsp;&nbsp;(<span class="id" title="var">Hdisj</span> : ∀ (<span class="id" title="var">n</span> <span class="id" title="var">ℓ</span> : <span class="id" title="var">nat</span>) ,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">n</span> &gt; <span class="id" title="var">ℓ</span>)%<span class="id" title="var">nat</span> →<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">d</span> ≥ <span class="id" title="var">n</span>)%<span class="id" title="var">nat</span> →<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">idents</span> (<span class="id" title="var">f</span> <span class="id" title="var">ℓ</span>) :#: <span class="id" title="var">idents</span> (<span class="id" title="var">f</span> <span class="id" title="var">n</span>))<br/>
&nbsp;&nbsp;: <span class="id" title="var">package</span> <span class="id" title="var">L</span> (<span class="id" title="var">interface_hierarchy</span> <span class="id" title="var">g</span> <span class="id" title="var">d</span>) (<span class="id" title="var">interface_hierarchy</span> <span class="id" title="var">f</span> <span class="id" title="var">d</span>).<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">combined</span><br/>
&nbsp;&nbsp;(<span class="id" title="var">A</span> : <span class="id" title="var">eqType</span>) (<span class="id" title="var">d</span> : <span class="id" title="var">nat</span>) <span class="id" title="var">L</span> (<span class="id" title="var">f</span> : <span class="id" title="var">A</span> → <span class="id" title="var">_</span>) <span class="id" title="var">g</span> <span class="id" title="var">Names</span><br/>
&nbsp;&nbsp;(<span class="id" title="var">i</span> : <span class="id" title="keyword">∀</span> (<span class="id" title="var">n</span> : <span class="id" title="var">nat</span>), (<span class="id" title="var">n</span> ≤ <span class="id" title="var">d</span>)%<span class="id" title="var">nat</span> → <span class="id" title="keyword">∀</span> (<span class="id" title="var">a</span> : <span class="id" title="var">A</span>), <span class="id" title="var">package</span> <span class="id" title="var">L</span> (<span class="id" title="var">f</span> <span class="id" title="var">a</span>) (<span class="id" title="var">g</span> <span class="id" title="var">a</span> <span class="id" title="var">n</span>))<br/>
&nbsp;&nbsp;(<span class="id" title="var">H</span> : <span class="id" title="keyword">∀</span> <span class="id" title="var">n</span>, (<span class="id" title="var">n</span> ≤ <span class="id" title="var">d</span>)%<span class="id" title="var">nat</span> → ∀ <span class="id" title="var">x</span> <span class="id" title="var">y</span> : <span class="id" title="var">A</span>, <span class="id" title="var">x</span> ≠ <span class="id" title="var">y</span> → <span class="id" title="var">idents</span> (<span class="id" title="var">g</span> <span class="id" title="var">x</span> <span class="id" title="var">n</span>) :#: <span class="id" title="var">idents</span> (<span class="id" title="var">g</span> <span class="id" title="var">y</span> <span class="id" title="var">n</span>))<br/>
&nbsp;&nbsp;(<span class="id" title="var">H0</span> : <span class="id" title="keyword">∀</span> <span class="id" title="var">n</span> <span class="id" title="var">ℓ</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">ℓ</span> &lt; <span class="id" title="var">n</span>)%<span class="id" title="var">nat</span> →<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">n</span> ≤ <span class="id" title="var">d</span>)%<span class="id" title="var">nat</span> →<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;∀ <span class="id" title="var">x</span> <span class="id" title="var">y</span> : <span class="id" title="var">A</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">idents</span> (<span class="id" title="var">g</span> <span class="id" title="var">x</span> <span class="id" title="var">ℓ</span>) :#: <span class="id" title="var">idents</span> (<span class="id" title="var">g</span> <span class="id" title="var">y</span> <span class="id" title="var">n</span>))<br/>
&nbsp;&nbsp;(<span class="id" title="var">H1</span> : <span class="id" title="keyword">∀</span> <span class="id" title="var">n</span> (<span class="id" title="var">H_le</span> : (<span class="id" title="var">n</span> ≤ <span class="id" title="var">d</span>)%<span class="id" title="var">nat</span>), ∀ <span class="id" title="var">a</span> : <span class="id" title="var">A</span>, <span class="id" title="var">trimmed</span> (<span class="id" title="var">g</span> <span class="id" title="var">a</span> <span class="id" title="var">n</span>) (<span class="id" title="var">i</span> <span class="id" title="var">n</span> <span class="id" title="var">H_le</span> <span class="id" title="var">a</span>))<br/>
&nbsp;&nbsp;(<span class="id" title="var">H3</span> : <span class="id" title="var">uniq</span> <span class="id" title="var">Names</span>) :<br/>
&nbsp;&nbsp;<span class="id" title="var">package</span> <span class="id" title="var">L</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">interface_foreach</span> <span class="id" title="var">f</span> <span class="id" title="var">Names</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">interface_hierarchy_foreach</span> <span class="id" title="var">g</span> <span class="id" title="var">Names</span> <span class="id" title="var">d</span>).<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">parallel_package_with_in_rel_hierarchy</span><br/>
&nbsp;&nbsp;{<span class="id" title="var">A</span> : <span class="id" title="var">eqType</span>} {<span class="id" title="var">L</span>} {<span class="id" title="var">g</span> <span class="id" title="var">f</span>} <span class="id" title="var">Names</span> <span class="id" title="var">l</span>  (<span class="id" title="var">d</span> : <span class="id" title="var">nat</span>)<br/>
&nbsp;&nbsp;(<span class="id" title="var">u</span> : <span class="id" title="keyword">∀</span> <span class="id" title="var">ℓ</span> (<span class="id" title="var">H_le</span> : (<span class="id" title="var">ℓ</span> ≤ <span class="id" title="var">d</span>)%<span class="id" title="var">nat</span>) <span class="id" title="var">a</span> (<span class="id" title="var">H</span> : <span class="id" title="var">a</span> \<span class="id" title="tactic">in</span> <span class="id" title="var">Names</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">package</span> <span class="id" title="var">L</span> (<span class="id" title="var">g</span> <span class="id" title="var">a</span> <span class="id" title="var">ℓ</span>) (<span class="id" title="var">f</span> <span class="id" title="var">a</span> <span class="id" title="var">ℓ</span>))<br/>
&nbsp;&nbsp;<span class="id" title="var">H_in</span> :<br/>
&nbsp;&nbsp;(∀ <span class="id" title="var">ℓ</span> <span class="id" title="var">n</span>, ∀ <span class="id" title="var">x</span> <span class="id" title="var">y</span> : <span class="id" title="var">A</span>, (<span class="id" title="var">x</span> ≠ <span class="id" title="var">y</span> ∨ <span class="id" title="var">ℓ</span> ≠ <span class="id" title="var">n</span>) → <span class="id" title="var">idents</span> (<span class="id" title="var">f</span> <span class="id" title="var">x</span> <span class="id" title="var">ℓ</span>) :#: <span class="id" title="var">idents</span> (<span class="id" title="var">f</span> <span class="id" title="var">y</span> <span class="id" title="var">n</span>)) →<br/>
&nbsp;&nbsp;<span class="id" title="var">uniq</span> <span class="id" title="var">l</span> →<br/>
&nbsp;&nbsp;(<span class="id" title="keyword">∀</span> <span class="id" title="var">ℓ</span> <span class="id" title="var">H_le</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">trimmed_pairs</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">List.map</span> (<span class="id" title="var">f</span>^~<span class="id" title="var">ℓ</span>) <span class="id" title="var">l</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">map_with_in_rel</span> <span class="id" title="var">Names</span> <span class="id" title="var">l</span> (<span class="id" title="var">H_in</span> := <span class="id" title="var">H_in</span>) (<span class="id" title="keyword">fun</span> <span class="id" title="var">a</span> <span class="id" title="var">H</span> ⇒ <span class="id" title="var">pack</span> (<span class="id" title="var">u</span> <span class="id" title="var">ℓ</span> <span class="id" title="var">H_le</span> <span class="id" title="var">a</span> <span class="id" title="var">H</span>)))) →<br/>
&nbsp;&nbsp;<span class="id" title="keyword">∀</span> <span class="id" title="var">ℓ</span> <span class="id" title="var">H_le</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">package</span> <span class="id" title="var">L</span> (<span class="id" title="var">interface_foreach</span> (<span class="id" title="var">g</span>^~ <span class="id" title="var">ℓ</span>) <span class="id" title="var">l</span>) (<span class="id" title="var">interface_foreach</span> (<span class="id" title="var">f</span>^~ <span class="id" title="var">ℓ</span>) <span class="id" title="var">l</span>) :=<br/>
&nbsp;&nbsp;(<span class="id" title="keyword">fun</span> <span class="id" title="var">H</span> <span class="id" title="var">H0</span> <span class="id" title="var">H1</span> <span class="id" title="var">ℓ</span> <span class="id" title="var">H_le</span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<span class="id" title="var">package</span> (<span class="id" title="var">parallel_raw</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">map_with_in_rel</span> <span class="id" title="var">Names</span> <span class="id" title="var">l</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">H_in</span> := <span class="id" title="var">H_in</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="keyword">fun</span> <span class="id" title="var">a</span> <span class="id" title="var">H</span> ⇒ <span class="id" title="var">pack</span> (<span class="id" title="var">u</span> <span class="id" title="var">ℓ</span> <span class="id" title="var">H_le</span> <span class="id" title="var">a</span> <span class="id" title="var">H</span>))))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#<span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">valid_forall_map_with_in_rel</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">f</span> := (<span class="id" title="var">f</span>^~<span class="id" title="var">ℓ</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">Names</span> <span class="id" title="var">l</span> <span class="id" title="var">d</span> <span class="id" title="var">_</span> <span class="id" title="var">H_le</span> (<span class="id" title="var">u</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>) <span class="id" title="var">H_in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="keyword">fun</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">H_neq</span> ⇒ <span class="id" title="var">H</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> (<span class="id" title="var">or_introl</span> <span class="id" title="var">H_neq</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">H0</span> (<span class="id" title="var">H1</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">forall_valid_from_packages</span> <span class="id" title="var">Names</span> <span class="id" title="var">l</span> <span class="id" title="var">_</span> (<span class="id" title="var">u</span> <span class="id" title="var">ℓ</span> <span class="id" title="var">H_le</span>) <span class="id" title="var">H_in</span>)}).<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">ℓ_parallel</span><br/>
&nbsp;&nbsp;{<span class="id" title="var">A</span> : <span class="id" title="var">eqType</span>} {<span class="id" title="var">L</span>} {<span class="id" title="var">g</span> <span class="id" title="var">f</span>} <span class="id" title="var">Names</span> <span class="id" title="var">l</span>  (<span class="id" title="var">d</span> : <span class="id" title="var">nat</span>)<br/>
&nbsp;&nbsp;(<span class="id" title="var">u</span> : <span class="id" title="keyword">∀</span> <span class="id" title="var">ℓ</span> (<span class="id" title="var">H_le</span> : (<span class="id" title="var">ℓ</span> ≤ <span class="id" title="var">d</span>)%<span class="id" title="var">nat</span>) <span class="id" title="var">a</span> (<span class="id" title="var">H</span> : <span class="id" title="var">a</span> \<span class="id" title="tactic">in</span> <span class="id" title="var">Names</span>), <span class="id" title="var">package</span> <span class="id" title="var">L</span> (<span class="id" title="var">g</span> <span class="id" title="var">a</span> <span class="id" title="var">ℓ</span>) (<span class="id" title="var">f</span> <span class="id" title="var">a</span> <span class="id" title="var">ℓ</span>))<br/>
&nbsp;&nbsp;<span class="id" title="var">H_in</span> :<br/>
&nbsp;&nbsp;(∀ <span class="id" title="var">ℓ</span> <span class="id" title="var">n</span>, ∀ <span class="id" title="var">x</span> <span class="id" title="var">y</span> : <span class="id" title="var">A</span>, (<span class="id" title="var">x</span> ≠ <span class="id" title="var">y</span> ∨ <span class="id" title="var">ℓ</span> ≠ <span class="id" title="var">n</span>) → <span class="id" title="var">idents</span> (<span class="id" title="var">f</span> <span class="id" title="var">x</span> <span class="id" title="var">ℓ</span>) :#: <span class="id" title="var">idents</span> (<span class="id" title="var">f</span> <span class="id" title="var">y</span> <span class="id" title="var">n</span>)) →<br/>
&nbsp;&nbsp;<span class="id" title="var">uniq</span> <span class="id" title="var">l</span> →<br/>
&nbsp;&nbsp;(<span class="id" title="keyword">∀</span> <span class="id" title="var">ℓ</span> <span class="id" title="var">H_le</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">trimmed_pairs</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">List.map</span> (<span class="id" title="var">f</span>^~<span class="id" title="var">ℓ</span>) <span class="id" title="var">l</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">map_with_in_rel</span> <span class="id" title="var">Names</span> <span class="id" title="var">l</span> (<span class="id" title="var">H_in</span> := <span class="id" title="var">H_in</span>) (<span class="id" title="keyword">fun</span> <span class="id" title="var">a</span> <span class="id" title="var">H</span> ⇒ <span class="id" title="var">pack</span> (<span class="id" title="var">u</span> <span class="id" title="var">ℓ</span> <span class="id" title="var">H_le</span> <span class="id" title="var">a</span> <span class="id" title="var">H</span>)))) →<br/>
&nbsp;&nbsp;<span class="id" title="var">package</span> <span class="id" title="var">L</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">interface_hierarchy_foreach</span> <span class="id" title="var">g</span> <span class="id" title="var">l</span> <span class="id" title="var">d</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">interface_hierarchy_foreach</span> <span class="id" title="var">f</span> <span class="id" title="var">l</span> <span class="id" title="var">d</span>) :=<br/>
&nbsp;&nbsp;(<span class="id" title="keyword">fun</span> <span class="id" title="var">H</span> <span class="id" title="var">H0</span> <span class="id" title="var">H1</span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">ℓ_packages</span> <span class="id" title="var">d</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">λ</span> <span class="id" title="var">ℓ</span> <span class="id" title="var">H_le</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">parallel_package_with_in_rel_hierarchy</span> <span class="id" title="var">Names</span> <span class="id" title="var">l</span> <span class="id" title="var">d</span> <span class="id" title="var">u</span> <span class="id" title="var">H_in</span> <span class="id" title="var">H</span> <span class="id" title="var">H0</span> <span class="id" title="var">H1</span> <span class="id" title="var">ℓ</span> <span class="id" title="var">H_le</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="keyword">fun</span> <span class="id" title="var">a</span> <span class="id" title="var">H_le</span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">trimmed_parallel_raw</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="keyword">fun</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">H_neq</span> ⇒ <span class="id" title="var">H</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> (<span class="id" title="var">or_introl</span> <span class="id" title="var">H_neq</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">H0</span> (<span class="id" title="var">H1</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="keyword">fun</span> <span class="id" title="var">n</span> <span class="id" title="var">ℓ</span> <span class="id" title="var">H_le</span> <span class="id" title="var">H_ge</span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">idents_foreach_disjoint_foreach</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="keyword">fun</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">H</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">or_intror</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;((<span class="id" title="var">eq_ind_r</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">λ</span> <span class="id" title="var">ℓ0</span> : <span class="id" title="var">nat</span>, (<span class="id" title="var">ℓ0</span> &lt; <span class="id" title="var">n</span>)%<span class="id" title="var">N</span> → <span class="id" title="var">False</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">λ</span> <span class="id" title="var">H_le0</span> : (<span class="id" title="var">n</span> &lt; <span class="id" title="var">n</span>)%<span class="id" title="var">N</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">eq_ind_r</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">λ</span> <span class="id" title="var">b</span> : <span class="id" title="var">bool</span>, <span class="id" title="var">b</span> → <span class="id" title="var">False</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">λ</span> <span class="id" title="var">H_le1</span> : <span class="id" title="var">false</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">False_ind</span> <span class="id" title="var">False</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">eq_ind</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">false</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">λ</span> <span class="id" title="var">e</span> : <span class="id" title="var">bool</span>, <span class="id" title="keyword">if</span> <span class="id" title="var">e</span> <span class="id" title="keyword">then</span> <span class="id" title="var">False</span> <span class="id" title="keyword">else</span> <span class="id" title="var">True</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">I</span> <span class="id" title="var">true</span> <span class="id" title="var">H_le1</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">ltnn</span> <span class="id" title="var">n</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">H_le0</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">y</span>:=<span class="id" title="var">ℓ</span>))^~ <span class="id" title="var">H_le</span>)<br/>
&nbsp;&nbsp;)))).<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">trimmed_ℓ_packages</span> {<span class="id" title="var">L</span>}<br/>
&nbsp;&nbsp;(<span class="id" title="var">d</span> : <span class="id" title="var">nat</span>)<br/>
&nbsp;&nbsp;{<span class="id" title="var">g</span> : <span class="id" title="var">nat</span> → <span class="id" title="var">Interface</span>}<br/>
&nbsp;&nbsp;{<span class="id" title="var">f</span> : <span class="id" title="var">nat</span> → <span class="id" title="var">Interface</span>}<br/>
&nbsp;&nbsp;(<span class="id" title="var">p</span> : <span class="id" title="keyword">∀</span> (<span class="id" title="var">n</span> : <span class="id" title="var">nat</span>), (<span class="id" title="var">d</span> ≥ <span class="id" title="var">n</span>)%<span class="id" title="var">nat</span> → <span class="id" title="var">package</span> <span class="id" title="var">L</span> (<span class="id" title="var">g</span> <span class="id" title="var">n</span>) (<span class="id" title="var">f</span> <span class="id" title="var">n</span>))<br/>
&nbsp;&nbsp;(<span class="id" title="var">H_trim_p</span> : <span class="id" title="keyword">∀</span> <span class="id" title="var">n</span>, <span class="id" title="keyword">∀</span> (<span class="id" title="var">H_ge</span> : (<span class="id" title="var">d</span> ≥ <span class="id" title="var">n</span>)%<span class="id" title="var">nat</span>), <span class="id" title="var">trimmed</span> (<span class="id" title="var">f</span> <span class="id" title="var">n</span>) (<span class="id" title="var">p</span> <span class="id" title="var">n</span> <span class="id" title="var">H_ge</span>))<br/>
&nbsp;&nbsp;(<span class="id" title="var">Hdisj</span> : ∀ (<span class="id" title="var">n</span> <span class="id" title="var">ℓ</span> : <span class="id" title="var">nat</span>) ,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">n</span> &gt; <span class="id" title="var">ℓ</span>)%<span class="id" title="var">nat</span> →<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">d</span> ≥ <span class="id" title="var">n</span>)%<span class="id" title="var">nat</span> →<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">idents</span> (<span class="id" title="var">f</span> <span class="id" title="var">ℓ</span>) :#: <span class="id" title="var">idents</span> (<span class="id" title="var">f</span> <span class="id" title="var">n</span>))<br/>
&nbsp;&nbsp;: <span class="id" title="var">trimmed</span> (<span class="id" title="var">interface_hierarchy</span> <span class="id" title="var">f</span> <span class="id" title="var">d</span>) (<span class="id" title="var">ℓ_packages</span> <span class="id" title="var">d</span> <span class="id" title="var">p</span> <span class="id" title="var">H_trim_p</span> <span class="id" title="var">Hdisj</span>).<br/>

<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">parallel_ID</span> <span class="id" title="var">d</span> (<span class="id" title="var">L</span> : <span class="id" title="var">seq</span> <span class="id" title="var">name</span>) (<span class="id" title="var">f</span> : <span class="id" title="var">name</span> → <span class="id" title="var">Interface</span>) :<br/>
&nbsp;&nbsp;(∀ <span class="id" title="var">x</span> <span class="id" title="var">y</span>, <span class="id" title="var">x</span> ≠ <span class="id" title="var">y</span> → <span class="id" title="var">idents</span> (<span class="id" title="var">f</span> <span class="id" title="var">x</span>) :#: <span class="id" title="var">idents</span> (<span class="id" title="var">f</span> <span class="id" title="var">y</span>)) →<br/>
&nbsp;&nbsp;(<span class="id" title="var">uniq</span> <span class="id" title="var">L</span>) →<br/>
&nbsp;&nbsp;(<span class="id" title="keyword">∀</span> <span class="id" title="var">x</span>, <span class="id" title="var">flat</span> (<span class="id" title="var">f</span> <span class="id" title="var">x</span>)) →<br/>
&nbsp;&nbsp;<span class="id" title="var">package</span> <span class="id" title="var">fset0</span> (<span class="id" title="var">interface_foreach</span> <span class="id" title="var">f</span> <span class="id" title="var">L</span>) (<span class="id" title="var">interface_foreach</span> <span class="id" title="var">f</span> <span class="id" title="var">L</span>) :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">fun</span> <span class="id" title="var">H</span> <span class="id" title="var">H0</span> <span class="id" title="var">H1</span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">parallel_package</span> <span class="id" title="var">d</span> <span class="id" title="var">L</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="keyword">fun</span> <span class="id" title="var">x</span> ⇒ {<span class="id" title="var">package</span> <span class="id" title="var">ID</span> (<span class="id" title="var">f</span> <span class="id" title="var">x</span>) #<span class="id" title="keyword">with</span> <span class="id" title="var">valid_ID</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> (<span class="id" title="var">H1</span> <span class="id" title="var">x</span>)}) <span class="id" title="var">H</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="keyword">fun</span> <span class="id" title="var">x</span> ⇒ <span class="id" title="var">trimmed_ID</span> <span class="id" title="var">_</span>) <span class="id" title="var">H0</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">combined_ID</span> (<span class="id" title="var">d</span> : <span class="id" title="var">nat</span>) (<span class="id" title="var">L</span> : <span class="id" title="var">seq</span> <span class="id" title="var">name</span>) (<span class="id" title="var">f</span> : <span class="id" title="var">name</span> → <span class="id" title="var">nat</span> → <span class="id" title="var">Interface</span>) :<br/>
&nbsp;&nbsp;(<span class="id" title="keyword">∀</span> <span class="id" title="var">n</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span>, <span class="id" title="var">x</span> ≠ <span class="id" title="var">y</span> → <span class="id" title="var">idents</span> (<span class="id" title="var">f</span> <span class="id" title="var">x</span> <span class="id" title="var">n</span>) :#: <span class="id" title="var">idents</span> (<span class="id" title="var">f</span> <span class="id" title="var">y</span> <span class="id" title="var">n</span>)) →<br/>
&nbsp;&nbsp;(<span class="id" title="var">uniq</span> <span class="id" title="var">L</span>) →<br/>
&nbsp;&nbsp;(<span class="id" title="keyword">∀</span> <span class="id" title="var">n</span> <span class="id" title="var">x</span>, <span class="id" title="var">flat</span> (<span class="id" title="var">f</span> <span class="id" title="var">x</span> <span class="id" title="var">n</span>)) →<br/>
&nbsp;&nbsp;(<span class="id" title="keyword">∀</span> <span class="id" title="var">n</span> <span class="id" title="var">ℓ</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">ℓ</span> &lt; <span class="id" title="var">n</span>)%<span class="id" title="var">nat</span> →<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">n</span> ≤ <span class="id" title="var">d</span>)%<span class="id" title="var">nat</span> →<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;∀ <span class="id" title="var">x</span> <span class="id" title="var">y</span>, <span class="id" title="var">idents</span> (<span class="id" title="var">f</span> <span class="id" title="var">x</span> <span class="id" title="var">ℓ</span>) :#: <span class="id" title="var">idents</span> (<span class="id" title="var">f</span> <span class="id" title="var">y</span> <span class="id" title="var">n</span>)) →<br/>
&nbsp;&nbsp;<span class="id" title="var">package</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">fset0</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">interface_hierarchy_foreach</span> <span class="id" title="var">f</span> <span class="id" title="var">L</span> <span class="id" title="var">d</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">interface_hierarchy_foreach</span> <span class="id" title="var">f</span> <span class="id" title="var">L</span> <span class="id" title="var">d</span>).<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">trimmed_trim</span> : <span class="id" title="keyword">∀</span> <span class="id" title="var">I</span> <span class="id" title="var">p</span>, <span class="id" title="var">trimmed</span> <span class="id" title="var">I</span> (<span class="id" title="var">trim</span> <span class="id" title="var">I</span> <span class="id" title="var">p</span>).<br/>

<br/>
<span class="id" title="keyword">Ltac</span> <span class="id" title="var">solve_direct_in</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> !<span class="id" title="var">fsubUset</span><br/>
&nbsp;&nbsp;; <span class="id" title="tactic">repeat</span> (<span class="id" title="tactic">apply</span> /<span class="id" title="var">andP</span> ; <span class="id" title="tactic">split</span>)<br/>
&nbsp;&nbsp;; <span class="id" title="tactic">repeat</span> (<span class="id" title="tactic">apply</span> <span class="id" title="var">fsubsetxx</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|| (<span class="id" title="tactic">apply</span> <span class="id" title="var">fsubsetU</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id" title="tactic">apply</span> /<span class="id" title="var">orP</span> ;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;((<span class="id" title="tactic">right</span> ; <span class="id" title="tactic">apply</span> <span class="id" title="var">fsubsetxx</span>) || <span class="id" title="tactic">left</span>))).<br/>

<br/>
<span class="id" title="keyword">Ltac</span> <span class="id" title="var">solve_idents</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| |- <span class="id" title="keyword">context</span> [ <span class="id" title="var">idents</span> ?<span class="id" title="var">a</span> :#: <span class="id" title="var">idents</span> (?<span class="id" title="var">b</span> :|: ?<span class="id" title="var">c</span>) ] ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="var">idents</span> <span class="id" title="tactic">at</span> 2<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id" title="tactic">rewrite</span> (<span class="id" title="var">imfsetU</span> <span class="id" title="var">_</span> <span class="id" title="var">b</span> <span class="id" title="var">c</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id" title="tactic">fold</span> (<span class="id" title="var">idents</span> <span class="id" title="var">b</span>) ; <span class="id" title="tactic">fold</span> (<span class="id" title="var">idents</span> <span class="id" title="var">c</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id" title="tactic">rewrite</span> <span class="id" title="var">fdisjointUr</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id" title="tactic">apply</span> /<span class="id" title="var">andP</span> ; <span class="id" title="tactic">split</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| |- <span class="id" title="keyword">context</span> [ <span class="id" title="var">idents</span> (?<span class="id" title="var">a</span> :|: ?<span class="id" title="var">b</span>) :#: <span class="id" title="var">idents</span> ?<span class="id" title="var">c</span> ] ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="var">idents</span> <span class="id" title="tactic">at</span> 1<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id" title="tactic">rewrite</span> (<span class="id" title="var">imfsetU</span> <span class="id" title="var">_</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id" title="tactic">fold</span> (<span class="id" title="var">idents</span> <span class="id" title="var">a</span>) ; <span class="id" title="tactic">fold</span> (<span class="id" title="var">idents</span> <span class="id" title="var">b</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id" title="tactic">rewrite</span> <span class="id" title="var">fdisjointUl</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id" title="tactic">apply</span> /<span class="id" title="var">andP</span> ; <span class="id" title="tactic">split</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| |- <span class="id" title="keyword">context</span> [ <span class="id" title="var">idents</span> (<span class="id" title="var">fset</span> (?<span class="id" title="var">a</span> :: ?<span class="id" title="var">b</span> :: <span class="id" title="var">_</span>)) ] ⇒ <span class="id" title="tactic">rewrite</span> (<span class="id" title="var">fset_cons</span> <span class="id" title="var">a</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| |- <span class="id" title="keyword">context</span> [ ?<span class="id" title="var">K</span> :#: <span class="id" title="var">idents</span> (<span class="id" title="var">interface_hierarchy</span> ?<span class="id" title="var">f</span> ?<span class="id" title="var">d</span>) ] ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">idents_interface_hierachy3</span> ; <span class="id" title="tactic">intros</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| |- <span class="id" title="keyword">context</span> [ <span class="id" title="var">idents</span> (<span class="id" title="var">interface_hierarchy</span> ?<span class="id" title="var">f</span> ?<span class="id" title="var">d</span>) :#: ?<span class="id" title="var">K</span> ] ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">fdisjointC</span> ; <span class="id" title="tactic">apply</span> <span class="id" title="var">idents_interface_hierachy3</span> ; <span class="id" title="tactic">intros</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| |- <span class="id" title="keyword">context</span> [ <span class="id" title="var">idents</span> (<span class="id" title="var">interface_foreach</span> ?<span class="id" title="var">f</span> ?<span class="id" title="var">L</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:#:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">idents</span> (<span class="id" title="var">interface_foreach</span> ?<span class="id" title="var">g</span> ?<span class="id" title="var">K</span>) ] ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">idents_foreach_disjoint_foreach_in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id" title="keyword">let</span> <span class="id" title="var">H</span> := <span class="id" title="tactic">fresh</span> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> ? <span class="id" title="var">H</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id" title="var">now</span> <span class="id" title="tactic">repeat</span> (<span class="id" title="tactic">move</span>: <span class="id" title="var">H</span> ⇒ /<span class="id" title="var">orP</span> [ /<span class="id" title="var">eqP</span> ? | <span class="id" title="var">H</span> ]) ; <span class="id" title="tactic">subst</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| |- <span class="id" title="keyword">context</span> [ <span class="id" title="var">idents</span> ?<span class="id" title="var">K</span> :#: <span class="id" title="var">idents</span> (<span class="id" title="var">interface_foreach</span> ?<span class="id" title="var">f</span> ?<span class="id" title="var">L</span>) ] ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">H</span> := <span class="id" title="tactic">fresh</span> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">idents_disjoint_foreach_in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; <span class="id" title="tactic">intros</span> ? <span class="id" title="var">H</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| |- <span class="id" title="keyword">context</span> [ <span class="id" title="var">idents</span> (<span class="id" title="var">interface_foreach</span> ?<span class="id" title="var">f</span> ?<span class="id" title="var">L</span>) :#: ?<span class="id" title="var">K</span> ] ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">fdisjointC</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span> ; <span class="id" title="tactic">unfold</span> <span class="id" title="var">idents</span> ; <span class="id" title="var">solve_imfset_disjoint</span>.<br/>

<br/>
<span class="id" title="keyword">Ltac</span> <span class="id" title="var">solve_trimmed2</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| |- <span class="id" title="keyword">context</span> [ <span class="id" title="var">trimmed</span> <span class="id" title="var">_</span> (<span class="id" title="var">trim</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>) ] ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">trimmed_trim</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| |- <span class="id" title="keyword">context</span> [ <span class="id" title="var">trimmed</span> ?<span class="id" title="var">E</span> (<span class="id" title="var">parallel_raw</span> <span class="id" title="var">_</span>) ] ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="var">trimmed_parallel_raw</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; [ | | <span class="id" title="tactic">apply</span> <span class="id" title="var">trimmed_pairs_map</span> ; <span class="id" title="tactic">intros</span>  ]<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; [ | <span class="id" title="tactic">reflexivity</span> | ]<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; [ | <span class="id" title="var">solve_trimmed2</span> ]<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; [ <span class="id" title="tactic">intros</span> ; <span class="id" title="tactic">unfold</span> <span class="id" title="var">idents</span> ; <span class="id" title="var">solve_imfset_disjoint</span> ]<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| |- <span class="id" title="keyword">context</span> [ <span class="id" title="var">trimmed</span> <span class="id" title="var">_</span> (<span class="id" title="var">pack</span> (<span class="id" title="var">ℓ_packages</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>)) ] ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">trimmed_ℓ_packages</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| |- <span class="id" title="keyword">context</span> [ <span class="id" title="var">trimmed</span> ?<span class="id" title="var">E</span> (<span class="id" title="var">par</span> ?<span class="id" title="var">a</span> ?<span class="id" title="var">b</span>) ] ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="var">trimmed_par</span> ; [ | <span class="id" title="var">solve_trimmed2</span>..] ; <span class="id" title="var">solve_idents</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| |- <span class="id" title="keyword">context</span> [ <span class="id" title="var">trimmed</span> ?<span class="id" title="var">E</span> (<span class="id" title="var">pack</span> {| <span class="id" title="var">pack</span> := <span class="id" title="var">_</span>; |}) ] ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="var">pack</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| |- <span class="id" title="keyword">context</span> [ <span class="id" title="var">trimmed</span> ?<span class="id" title="var">E</span> (<span class="id" title="var">mkfmap</span> (<span class="id" title="var">cons</span> ?<span class="id" title="var">a</span> ?<span class="id" title="var">b</span>)) ] ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">trimmed_package_cons</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| |- <span class="id" title="keyword">context</span> [ <span class="id" title="var">trimmed</span> ?<span class="id" title="var">E</span> (<span class="id" title="var">mkfmap</span> <span class="id" title="var">nil</span>) ] ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">trimmed_empty_package</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| |- <span class="id" title="keyword">context</span> [ <span class="id" title="var">trimmed</span> ?<span class="id" title="var">E</span> (<span class="id" title="var">ID</span> <span class="id" title="var">_</span>) ] ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">trimmed_ID</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">domm_trim_disjoint_is_ident</span> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">∀</span> <span class="id" title="var">E1</span> <span class="id" title="var">E2</span> <span class="id" title="var">p1</span> <span class="id" title="var">p2</span>, <span class="id" title="var">idents</span> <span class="id" title="var">E1</span> :#: <span class="id" title="var">idents</span> <span class="id" title="var">E2</span> → <span class="id" title="var">domm</span> (<span class="id" title="var">trim</span> <span class="id" title="var">E1</span> <span class="id" title="var">p1</span>) :#: <span class="id" title="var">domm</span> (<span class="id" title="var">trim</span> <span class="id" title="var">E2</span> <span class="id" title="var">p2</span>).<br/>

<br/>
</div>

<div class="doc">
<a id="lab13"></a><h1 class="section">FunExt rewrite</h1>

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">function_fset_cons_l</span> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">∀</span> {<span class="id" title="var">A</span> : <span class="id" title="var">eqType</span>} {<span class="id" title="var">T</span>} <span class="id" title="var">x</span> <span class="id" title="var">xs</span> <span class="id" title="var">K</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="keyword">fun</span> (<span class="id" title="var">n</span> : <span class="id" title="var">A</span>) ⇒ <span class="id" title="var">fset</span> (<span class="id" title="var">x</span> <span class="id" title="var">n</span> :: <span class="id" title="var">xs</span> <span class="id" title="var">n</span>) :|: <span class="id" title="var">K</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;= (<span class="id" title="keyword">fun</span> (<span class="id" title="var">n</span> : <span class="id" title="var">A</span>) ⇒ <span class="id" title="var">fset</span> (<span class="id" title="var">T</span> := <span class="id" title="var">T</span>) ([<span class="id" title="var">x</span> <span class="id" title="var">n</span>]) :|: <span class="id" title="var">fset</span> (<span class="id" title="var">xs</span> <span class="id" title="var">n</span>) :|: <span class="id" title="var">K</span>).<br/>
 
<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">function_fset_cat_l</span> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">∀</span> {<span class="id" title="var">A</span> : <span class="id" title="var">eqType</span>} {<span class="id" title="var">T</span>} <span class="id" title="var">ys</span> <span class="id" title="var">xs</span> <span class="id" title="var">K</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="keyword">fun</span> (<span class="id" title="var">n</span> : <span class="id" title="var">A</span>) ⇒ <span class="id" title="var">fset</span> (<span class="id" title="var">ys</span> <span class="id" title="var">n</span> ++ <span class="id" title="var">xs</span> <span class="id" title="var">n</span>) :|: <span class="id" title="var">K</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;= (<span class="id" title="keyword">fun</span> (<span class="id" title="var">n</span> : <span class="id" title="var">A</span>) ⇒ <span class="id" title="var">fset</span> (<span class="id" title="var">T</span> := <span class="id" title="var">T</span>) (<span class="id" title="var">ys</span> <span class="id" title="var">n</span>) :|: <span class="id" title="var">fset</span> (<span class="id" title="var">xs</span> <span class="id" title="var">n</span>) :|: <span class="id" title="var">K</span>).<br/>
 
<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">function_fset_cat_middle</span> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">∀</span> {<span class="id" title="var">A</span> : <span class="id" title="var">eqType</span>} {<span class="id" title="var">T</span>} <span class="id" title="var">ys</span> <span class="id" title="var">xs</span> <span class="id" title="var">L</span> <span class="id" title="var">R</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="keyword">fun</span> (<span class="id" title="var">n</span> : <span class="id" title="var">A</span>) ⇒ <span class="id" title="var">L</span> :|: <span class="id" title="var">fset</span> (<span class="id" title="var">ys</span> <span class="id" title="var">n</span> ++ <span class="id" title="var">xs</span> <span class="id" title="var">n</span>) :|: <span class="id" title="var">R</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;= (<span class="id" title="keyword">fun</span> (<span class="id" title="var">n</span> : <span class="id" title="var">A</span>) ⇒ <span class="id" title="var">L</span> :|: <span class="id" title="var">fset</span> (<span class="id" title="var">T</span> := <span class="id" title="var">T</span>) (<span class="id" title="var">ys</span> <span class="id" title="var">n</span>) :|: <span class="id" title="var">fset</span> (<span class="id" title="var">xs</span> <span class="id" title="var">n</span>) :|: <span class="id" title="var">R</span>).<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">function_fset_cat</span> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">∀</span> {<span class="id" title="var">A</span> : <span class="id" title="var">eqType</span>} {<span class="id" title="var">T</span>} <span class="id" title="var">ys</span> <span class="id" title="var">xs</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="keyword">fun</span> (<span class="id" title="var">n</span> : <span class="id" title="var">A</span>) ⇒ <span class="id" title="var">fset</span> (<span class="id" title="var">ys</span> <span class="id" title="var">n</span> ++ <span class="id" title="var">xs</span> <span class="id" title="var">n</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;= (<span class="id" title="keyword">fun</span> (<span class="id" title="var">n</span> : <span class="id" title="var">A</span>) ⇒ <span class="id" title="var">fset</span> (<span class="id" title="var">T</span> := <span class="id" title="var">T</span>) (<span class="id" title="var">ys</span> <span class="id" title="var">n</span>) :|: <span class="id" title="var">fset</span> (<span class="id" title="var">xs</span> <span class="id" title="var">n</span>)).<br/>
 
<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">function_fset_cons</span> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">∀</span> {<span class="id" title="var">A</span> : <span class="id" title="var">eqType</span>} {<span class="id" title="var">T</span>} <span class="id" title="var">x</span> <span class="id" title="var">xs</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="keyword">fun</span> (<span class="id" title="var">n</span> : <span class="id" title="var">A</span>) ⇒ <span class="id" title="var">fset</span> (<span class="id" title="var">x</span> <span class="id" title="var">n</span> :: <span class="id" title="var">xs</span> <span class="id" title="var">n</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;= (<span class="id" title="keyword">fun</span> (<span class="id" title="var">n</span> : <span class="id" title="var">A</span>) ⇒ <span class="id" title="var">fset</span> (<span class="id" title="var">T</span> := <span class="id" title="var">T</span>) ([<span class="id" title="var">x</span> <span class="id" title="var">n</span>]) :|: <span class="id" title="var">fset</span> (<span class="id" title="var">xs</span> <span class="id" title="var">n</span>)).<br/>
 
<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">function2_fset_cat</span> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">∀</span> {<span class="id" title="var">A</span> <span class="id" title="var">B</span> : <span class="id" title="var">eqType</span>} {<span class="id" title="var">T</span>} <span class="id" title="var">x</span> <span class="id" title="var">xs</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="keyword">fun</span> (<span class="id" title="var">a</span> : <span class="id" title="var">A</span>) (<span class="id" title="var">b</span> : <span class="id" title="var">B</span>) ⇒ <span class="id" title="var">fset</span> (<span class="id" title="var">x</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span> :: <span class="id" title="var">xs</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;= (<span class="id" title="keyword">fun</span> (<span class="id" title="var">a</span> : <span class="id" title="var">A</span>) (<span class="id" title="var">b</span> : <span class="id" title="var">B</span>) ⇒ <span class="id" title="var">fset</span> (<span class="id" title="var">T</span> := <span class="id" title="var">T</span>) ([<span class="id" title="var">x</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span>]) :|: <span class="id" title="var">fset</span> (<span class="id" title="var">xs</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span>)).<br/>
 
<br/>
</div>

<div class="doc">
<a id="lab14"></a><h1 class="section">Advantage</h1>

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">advantage_reflexivity</span> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">∀</span> <span class="id" title="var">P</span> <span class="id" title="var">A</span>, <span class="id" title="var">AdvantageE</span> <span class="id" title="var">P</span> <span class="id" title="var">P</span> <span class="id" title="var">A</span> = 0%<span class="id" title="var">R</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">Advantage_par_emptyR</span> :<br/>
&nbsp;&nbsp;∀ <span class="id" title="var">G₀</span> <span class="id" title="var">G₁</span> <span class="id" title="var">A</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">AdvantageE</span> (<span class="id" title="var">par</span> <span class="id" title="var">G₀</span> <span class="id" title="var">emptym</span>) (<span class="id" title="var">par</span> <span class="id" title="var">G₁</span> <span class="id" title="var">emptym</span>) <span class="id" title="var">A</span> = <span class="id" title="var">AdvantageE</span> <span class="id" title="var">G₀</span> <span class="id" title="var">G₁</span> <span class="id" title="var">A</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">Advantage_parR</span> :<br/>
&nbsp;&nbsp;∀ <span class="id" title="var">G₀</span> <span class="id" title="var">G₁</span> <span class="id" title="var">G₁'</span> <span class="id" title="var">A</span> <span class="id" title="var">L₀</span> <span class="id" title="var">L₁</span> <span class="id" title="var">L₁'</span> <span class="id" title="var">E₀</span> <span class="id" title="var">E₁</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">ValidPackage</span> <span class="id" title="var">L₀</span> <span class="id" title="var">Game_import</span> <span class="id" title="var">E₀</span> <span class="id" title="var">G₀</span> →<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">ValidPackage</span> <span class="id" title="var">L₁</span> <span class="id" title="var">Game_import</span> <span class="id" title="var">E₁</span> <span class="id" title="var">G₁</span> →<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">ValidPackage</span> <span class="id" title="var">L₁'</span> <span class="id" title="var">Game_import</span> <span class="id" title="var">E₁</span> <span class="id" title="var">G₁'</span> →<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">flat</span> <span class="id" title="var">E₁</span> →<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">trimmed</span> <span class="id" title="var">E₀</span> <span class="id" title="var">G₀</span> →<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">trimmed</span> <span class="id" title="var">E₁</span> <span class="id" title="var">G₁</span> →<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">trimmed</span> <span class="id" title="var">E₁</span> <span class="id" title="var">G₁'</span> →<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">AdvantageE</span> (<span class="id" title="var">par</span> <span class="id" title="var">G₁</span> <span class="id" title="var">G₀</span>) (<span class="id" title="var">par</span> <span class="id" title="var">G₁'</span> <span class="id" title="var">G₀</span>) <span class="id" title="var">A</span> =<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">AdvantageE</span> <span class="id" title="var">G₁</span> <span class="id" title="var">G₁'</span> (<span class="id" title="var">A</span> ∘ <span class="id" title="var">par</span> (<span class="id" title="var">ID</span> <span class="id" title="var">E₁</span>) <span class="id" title="var">G₀</span>).<br/>
</div>
</div>

<div id="footer">
<hr/><a href="index.html">Index</a><hr/>This page has been generated by <a href="http://coq.inria.fr/">coqdoc</a>
</div>

</div>

</body>
</html>